<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Market Insights - AlphaAnalytics</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* Mobile Menu Animation */
.menu-toggle span {
  transition: all 0.3s ease;
}

.menu-toggle span.active:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.menu-toggle span.active:nth-child(2) {
  opacity: 0;
}

.menu-toggle span.active:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Ensure mobile menu displays properly */
@media (max-width: 768px) {
  .nav-items {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-dark);
    border-top: 1px solid var(--border-color);
    padding: 16px;
    flex-direction: column;
    gap: 8px;
    z-index: 1000;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .nav-item {
    padding: 12px 16px;
    border-radius: 8px;
    justify-content: flex-start;
  }
}

:root {
  --primary-white: #ffffff;
  --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
  --bg-dark: #0f0f23;
  --bg-card: rgba(30, 30, 46, 0.8);
  --bg-card-hover: rgba(40, 40, 62, 0.9);
  --text-primary: #ffffff;
  --text-secondary: #a0a0c0;
  --text-muted: #707090;
  --border-color: rgba(255, 255, 255, 0.1);
  --hover-color: rgba(0, 230, 255, 0.15);
  --active-color: #00e6ff;
  --up-color: #00ff9d;
  --down-color: #ff4d7c;
  --accent-blue: #00e6ff;
  --accent-teal: #00ff9d;
  --accent-purple: #8a2be2;
  --accent-pink: #ff4d7c;
  --shadow-glow: 0 0 20px rgba(0, 230, 255, 0.3);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.2);
}

body.light {
  --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  --bg-dark: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.9);
  --bg-card-hover: rgba(255, 255, 255, 1);
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: rgba(0, 0, 0, 0.1);
  --hover-color: rgba(0, 230, 255, 0.1);
  --active-color: #0077cc;
  --shadow-glow: 0 0 20px rgba(0, 119, 204, 0.2);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

body {
  background: var(--bg-gradient);
  color: var(--text-primary);
  transition: all 0.4s ease;
  min-height: 100vh;
  line-height: 1.6;
}

.container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
}

/* Enhanced Navbar */
.navbar {
  background: rgba(15, 15, 35, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 1000;
  padding: 0;
}

.nav-wrap {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
}

.nav-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
}

.logo {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 28px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo i {
  font-size: 24px;
}

.nav-items {
  display: flex;
  gap: 8px;
  list-style: none;
}

.nav-item {
  padding: 10px 16px;
  border-radius: 12px;
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  font-size: 14px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.nav-item:hover {
  background: var(--hover-color);
  color: var(--active-color);
  transform: translateY(-2px);
}

.nav-item.active {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.menu-toggle {
  display: none;
  flex-direction: column;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
}

.menu-toggle span {
  width: 24px;
  height: 2px;
  background: var(--text-primary);
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* Main Content */
.main-content {
  flex: 1;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

/* Header Section */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
  gap: 20px;
}

.header h1 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 32px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.header-controls {
  display: flex;
  gap: 16px;
  align-items: center;
}

/* Search Bar */
.search-container {
  position: relative;
  width: 400px;
  max-width: 100%;
}

.search-bar {
  width: 100%;
  padding: 14px 20px 14px 48px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 15px;
  font-weight: 500;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.search-bar:focus {
  outline: none;
  border-color: var(--active-color);
  box-shadow: var(--shadow-glow);
}

.search-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 12px;
}

.btn {
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-primary {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 30px rgba(0, 230, 255, 0.5);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--bg-card-hover);
  border-color: var(--active-color);
}

/* AI Insight */
.ai-insight {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
}

.ai-insight-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.ai-insight-header h3 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.ai-icon {
  font-size: 20px;
  color: var(--active-color);
}

.ai-content {
  color: var(--text-primary);
  font-size: 15px;
  line-height: 1.6;
}

/* Market Overview */
.market-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}

.market-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.market-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.market-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.market-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.market-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
}

.market-value {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
  font-family: 'Space Grotesk', sans-serif;
}

.market-change {
  font-size: 14px;
  font-weight: 600;
  padding: 6px 12px;
  border-radius: 20px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.market-change.positive {
  background: rgba(0, 255, 157, 0.15);
  color: var(--up-color);
}

.market-change.negative {
  background: rgba(255, 77, 124, 0.15);
  color: var(--down-color);
}

/* Insights Grid */
.insights-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}

.insight-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.insight-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.insight-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.insight-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.insight-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  color: var(--text-primary);
}

.insight-symbol {
  color: var(--text-muted);
  font-size: 14px;
  font-weight: 500;
  margin-top: 4px;
}

.insight-price {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  font-family: 'Space Grotesk', sans-serif;
}

.insight-details {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.insight-change {
  font-size: 16px;
  font-weight: 600;
  padding: 8px 16px;
  border-radius: 20px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.insight-change.positive {
  background: rgba(0, 255, 157, 0.15);
  color: var(--up-color);
}

.insight-change.negative {
  background: rgba(255, 77, 124, 0.15);
  color: var(--down-color);
}

.insight-volume {
  color: var(--text-muted);
  font-size: 14px;
  font-weight: 500;
}

/* Sector Performance */
.sector-section {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 32px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  margin-bottom: 32px;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.section-header h2 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 24px;
  font-weight: 700;
}

.sector-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.sector-item {
  background: var(--bg-dark);
  border-radius: 16px;
  padding: 20px;
  border: 1px solid var(--border-color);
  transition: all 0.3s ease;
  text-align: center;
}

.sector-item:hover {
  border-color: var(--active-color);
  transform: translateY(-2px);
}

.sector-name {
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 8px;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.sector-performance {
  font-size: 18px;
  font-weight: 700;
  font-family: 'Space Grotesk', sans-serif;
}

.sector-performance.positive {
  color: var(--up-color);
}

.sector-performance.negative {
  color: var(--down-color);
}

/* Loading States */
.loading {
  text-align: center;
  padding: 40px;
  color: var(--text-muted);
}

.loading i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

/* Shimmer Loading */
.shimmer {
  background: linear-gradient(90deg, var(--bg-dark) 25%, var(--bg-card) 50%, var(--bg-dark) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Responsive Design */
@media (max-width: 768px) {
  .navbar {
    padding: 0 16px;
  }
  
  .nav-row {
    flex-wrap: wrap;
  }
  
  .menu-toggle {
    display: flex;
  }
  
  .nav-items {
    display: none;
    width: 100%;
    flex-direction: column;
    gap: 8px;
    margin-top: 16px;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .main-content {
    padding: 16px;
  }
  
  .header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .header-controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .search-container {
    width: 100%;
  }
  
  .market-overview {
    grid-template-columns: 1fr;
  }
  
  .insights-grid {
    grid-template-columns: 1fr;
  }
  
  .sector-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .market-card {
    padding: 20px;
  }
  
  .insight-card {
    padding: 20px;
  }
  
  .sector-section {
    padding: 24px;
  }
  
  .sector-grid {
    grid-template-columns: 1fr;
  }
}
</style>
/* Mobile Menu Animation */
.menu-toggle span {
  transition: all 0.3s ease;
}

.menu-toggle span.active:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.menu-toggle span.active:nth-child(2) {
  opacity: 0;
}

.menu-toggle span.active:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Ensure mobile menu displays properly */
@media (max-width: 768px) {
  .nav-items {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-dark);
    border-top: 1px solid var(--border-color);
    padding: 16px;
    flex-direction: column;
    gap: 8px;
    z-index: 1000;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .nav-item {
    padding: 12px 16px;
    border-radius: 8px;
    justify-content: flex-start;
  }
}

</head>
<body>
<div class="container">
  <!-- Enhanced Navbar -->
  <header class="navbar">
    <div class="nav-wrap">
      <div class="nav-row">
        <div class="logo">
          <i class="fas fa-chart-line"></i>
          AlphaAnalytics
        </div>
        
        <button class="menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <nav class="nav-items">
          <a href="jeet.html" class="nav-item">
            <i class="fas fa-home"></i>Dashboard
          </a>
          <a href="portfolio.html" class="nav-item">
            <i class="fas fa-briefcase"></i>Portfolio
          </a>
          <a href="mystock.html" class="nav-item">
            <i class="fas fa-star"></i>My Stock
          </a>
          <a href="deposit.html" class="nav-item">
            <i class="fas fa-wallet"></i>Deposit
          </a>
          <a href="insight.html" class="nav-item active">
            <i class="fas fa-brain"></i>Insight
          </a>
          <a href="prediction.html" class="nav-item">
            <i class="fas fa-crystal-ball"></i>Prediction
          </a>
          <a href="news.html" class="nav-item">
            <i class="fas fa-newspaper"></i>News
          </a>
          <a href="videos.html" class="nav-item">
            <i class="fas fa-play-circle"></i>Videos
          </a>
          <a href="Superstars.html" class="nav-item">
            <i class="fas fa-trophy"></i>Superstars
          </a>
          <a href="alerts.html" class="nav-item">
            <i class="fas fa-bell"></i>Alerts
          </a>
          <a href="help.html" class="nav-item">
            <i class="fas fa-question-circle"></i>Help
          </a>
          <a href="profile.html" class="nav-item">
            <i class="fas fa-user"></i>Profile
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <div class="header">
      <h1>Market Intelligence</h1>
      <div class="header-controls">
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-bar" placeholder="Search stocks, sectors..." id="searchInput">
        </div>
        <div class="action-buttons">
          <button class="btn btn-primary" onclick="exportInsights()">
            <i class="fas fa-download"></i>Export
          </button>
          <button class="btn btn-secondary" onclick="toggleTheme()">
            <i class="fas fa-palette"></i>Theme
          </button>
        </div>
      </div>
    </div>

    <!-- AI Insight -->
    <div class="ai-insight">
      <div class="ai-insight-header">
        <i class="fas fa-robot ai-icon"></i>
        <h3>AI Market Intelligence</h3>
      </div>
      <div class="ai-content" id="aiInsightText">
        Analyzing market patterns and generating real-time insights...
      </div>
    </div>

    <!-- Market Overview -->
    <div class="market-overview">
      <div class="market-card">
        <div class="market-header">
          <div class="market-title">S&P 500</div>
          <div class="market-change positive">
            <i class="fas fa-arrow-up"></i>+1.25%
          </div>
        </div>
        <div class="market-value">4,890.23</div>
        <div class="market-details">+59.67 points today</div>
      </div>
      
      <div class="market-card">
        <div class="market-header">
          <div class="market-title">NASDAQ</div>
          <div class="market-change positive">
            <i class="fas fa-arrow-up"></i>+2.15%
          </div>
        </div>
        <div class="market-value">16,842.57</div>
        <div class="market-details">Tech leads rally</div>
      </div>
      
      <div class="market-card">
        <div class="market-header">
          <div class="market-title">DOW JONES</div>
          <div class="market-change negative">
            <i class="fas fa-arrow-down"></i>-0.45%
          </div>
        </div>
        <div class="market-value">39,512.34</div>
        <div class="market-details">-178.23 points</div>
      </div>
    </div>

    <!-- Stock Insights -->
    <div class="insights-grid" id="insightsGrid">
      <!-- Insights will be populated by JavaScript -->
    </div>

    <!-- Sector Performance -->
    <div class="sector-section">
      <div class="section-header">
        <i class="fas fa-chart-pie"></i>
        <h2>Sector Performance</h2>
      </div>
      <div class="sector-grid" id="sectorGrid">
        <!-- Sector performance will be populated by JavaScript -->
      </div>
    </div>
  </main>
</div>

<script>
// Mobile menu functionality
document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.querySelector('.menu-toggle');
  const navItems = document.querySelector('.nav-items');
  
  if (menuToggle && navItems) {
    menuToggle.addEventListener('click', function() {
      navItems.classList.toggle('show');
      // Animate hamburger to X
      const spans = menuToggle.querySelectorAll('span');
      spans.forEach(span => span.classList.toggle('active'));
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      if (!event.target.closest('.navbar') && navItems.classList.contains('show')) {
        navItems.classList.remove('show');
        const spans = menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.remove('active'));
      }
    });
  }
});

const TWELVEDATA_API_KEY = '5f988a8aff6b4b58848dfcf67af727d9';
let allInsights = [];
let sectors = [];

// Sample sector data
const sectorData = [
  { name: 'Technology', performance: 2.8 },
  { name: 'Healthcare', performance: 1.2 },
  { name: 'Financials', performance: -0.5 },
  { name: 'Energy', performance: -1.8 },
  { name: 'Consumer', performance: 0.9 },
  { name: 'Industrials', performance: 0.3 }
];

// Show loading placeholders
function showLoadingPlaceholders() {
  const insightsGrid = document.getElementById('insightsGrid');
  insightsGrid.innerHTML = '';
  
  // Create 6 loading cards
  for (let i = 0; i < 6; i++) {
    const card = document.createElement('div');
    card.className = 'insight-card';
    card.innerHTML = `
      <div class="insight-header">
// Mobile menu functionality
document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.querySelector('.menu-toggle');
  const navItems = document.querySelector('.nav-items');
  
  if (menuToggle && navItems) {
    menuToggle.addEventListener('click', function() {
      navItems.classList.toggle('show');
      // Animate hamburger to X
      const spans = menuToggle.querySelectorAll('span');
      spans.forEach(span => span.classList.toggle('active'));
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(event) {
      if (!event.target.closest('.navbar') && navItems.classList.contains('show')) {
        navItems.classList.remove('show');
        const spans = menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.remove('active'));
      }
    });
  }
});

        <div>
          <div class="shimmer" style="width: 120px; height: 20px; margin-bottom: 8px;"></div>
          <div class="shimmer" style="width: 80px; height: 16px;"></div>
        </div>
        <div class="shimmer" style="width: 60px; height: 24px;"></div>
      </div>
      <div class="shimmer" style="width: 100px; height: 32px; margin-bottom: 16px;"></div>
      <div class="insight-details">
        <div class="shimmer" style="width: 80px; height: 24px;"></div>
        <div class="shimmer" style="width: 60px; height: 16px;"></div>
      </div>
    `;
    insightsGrid.appendChild(card);
  }
}

// Fetch live market data
async function fetchLiveData() {
  showLoadingPlaceholders();
  
  const symbols = ['AAPL', 'GOOGL', 'MSFT', 'TSLA', 'AMZN', 'META', 'NVDA', 'JPM', 'JNJ', 'V'];
  
  try {
    const response = await fetch(
      `https://api.twelvedata.com/quote?symbol=${symbols.join(',')}&apikey=${TWELVEDATA_API_KEY}`
    );
    const data = await response.json();
    
    allInsights = [];
    
    // Process each stock
    Object.values(data).forEach(stock => {
      if (stock.symbol && stock.close && stock.percent_change) {
        allInsights.push({
          symbol: stock.symbol,
          name: stock.name || getCompanyName(stock.symbol),
          price: parseFloat(stock.close),
          change: parseFloat(stock.percent_change),
          changeRaw: parseFloat(stock.change),
          volume: stock.volume ? parseInt(stock.volume).toLocaleString() : 'N/A',
          timestamp: stock.datetime || new Date().toISOString()
        });
      }
    });
    
    renderInsights(allInsights);
    renderSectorPerformance();
    
  } catch (error) {
    console.error('Error fetching market data:', error);
    showErrorState();
  }
}

// Get company name from symbol
function getCompanyName(symbol) {
  const companyNames = {
    'AAPL': 'Apple Inc.',
    'GOOGL': 'Alphabet Inc.',
    'MSFT': 'Microsoft Corporation',
    'TSLA': 'Tesla Inc.',
    'AMZN': 'Amazon.com Inc.',
    'META': 'Meta Platforms Inc.',
    'NVDA': 'NVIDIA Corporation',
    'JPM': 'JPMorgan Chase & Co.',
    'JNJ': 'Johnson & Johnson',
    'V': 'Visa Inc.'
  };
  return companyNames[symbol] || symbol;
}

// Render stock insights
function renderInsights(insights) {
  const insightsGrid = document.getElementById('insightsGrid');
  insightsGrid.innerHTML = '';
  
  if (insights.length === 0) {
    insightsGrid.innerHTML = `
      <div class="loading">
        <i class="fas fa-chart-line"></i>
        <h3>No Data Available</h3>
        <p>Unable to load market insights at this time</p>
      </div>
    `;
    return;
  }
  
  insights.forEach(insight => {
    const changeClass = insight.change >= 0 ? 'positive' : 'negative';
    const changeIcon = insight.change >= 0 ? 'fa-arrow-up' : 'fa-arrow-down';
    
    const card = document.createElement('div');
    card.className = 'insight-card';
    card.innerHTML = `
      <div class="insight-header">
        <div>
          <div class="insight-title">${insight.name}</div>
          <div class="insight-symbol">${insight.symbol}</div>
        </div>
        <div class="insight-change ${changeClass}">
          <i class="fas ${changeIcon}"></i>${Math.abs(insight.change)}%
        </div>
      </div>
      <div class="insight-price">$${insight.price.toFixed(2)}</div>
      <div class="insight-details">
        <div class="insight-change ${changeClass}">
          ${insight.changeRaw >= 0 ? '+' : ''}${insight.changeRaw.toFixed(2)}
        </div>
        <div class="insight-volume">Vol: ${insight.volume}</div>
      </div>
    `;
    insightsGrid.appendChild(card);
  });
}

// Render sector performance
function renderSectorPerformance() {
  const sectorGrid = document.getElementById('sectorGrid');
  sectorGrid.innerHTML = '';
  
  sectorData.forEach(sector => {
    const performanceClass = sector.performance >= 0 ? 'positive' : 'negative';
    const performanceIcon = sector.performance >= 0 ? '+' : '';
    
    const sectorItem = document.createElement('div');
    sectorItem.className = 'sector-item';
    sectorItem.innerHTML = `
      <div class="sector-name">${sector.name}</div>
      <div class="sector-performance ${performanceClass}">
        ${performanceIcon}${sector.performance}%
      </div>
    `;
    sectorGrid.appendChild(sectorItem);
  });
}

// Show error state
function showErrorState() {
  const insightsGrid = document.getElementById('insightsGrid');
  insightsGrid.innerHTML = `
    <div class="loading">
      <i class="fas fa-exclamation-triangle"></i>
      <h3>Connection Error</h3>
      <p>Unable to fetch live market data. Please try again later.</p>
    </div>
  `;
}

// Search functionality
function setupSearch() {
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', (e) => {
    const query = e.target.value.toLowerCase().trim();
    
    if (!query) {
      renderInsights(allInsights);
      return;
    }
    
    const filtered = allInsights.filter(insight => 
      insight.symbol.toLowerCase().includes(query) ||
      insight.name.toLowerCase().includes(query)
    );
    
    renderInsights(filtered);
  });
}

// Export insights
function exportInsights() {
  if (allInsights.length === 0) {
    alert('No data available to export');
    return;
  }
  
  const csv = "Symbol,Name,Price,Change%,Change,Volume\n" + 
    allInsights.map(insight => 
      `${insight.symbol},${insight.name},${insight.price},${insight.change},${insight.changeRaw},${insight.volume}`
    ).join("\n");
  
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'market_insights.csv';
  a.click();
  URL.revokeObjectURL(url);
}

// Toggle theme
function toggleTheme() {
  document.body.classList.toggle('light');
}

// Update AI insight
function updateAIInsight() {
  const insights = [
    "AI detects strong momentum in technology sector with institutional buying pressure. Consider quality tech stocks for short-term gains.",
    "Market volatility expected to increase next week. Technical indicators show potential breakout above key resistance levels.",
    "Healthcare sector showing signs of consolidation. AI predicts 3-5% upside in pharmaceutical stocks over next 2 weeks.",
    "Foreign institutional investors increasing exposure to emerging markets. Pattern similar to 2020 bull market inception detected.",
    "Energy sector facing headwinds amid geopolitical tensions. AI recommends cautious approach to oil and gas investments.",
    "Consumer discretionary stocks showing resilience. Retail sector poised for recovery as consumer sentiment improves."
  ];
  
  const randomInsight = insights[Math.floor(Math.random() * insights.length)];
  document.getElementById('aiInsightText').textContent = randomInsight;
}

// Initialize the application
document.addEventListener('DOMContentLoaded', () => {
  // Initialize mobile menu
  const menuToggle = document.querySelector('.menu-toggle');
  const navItems = document.querySelector('.nav-items');
  
  menuToggle.addEventListener('click', () => {
    navItems.classList.toggle('show');
  });
  
  // Setup search functionality
  setupSearch();
  
  // Load initial data
  fetchLiveData();
  updateAIInsight();
  
  // Set up periodic updates
  setInterval(fetchLiveData, 60000); // Update every minute
  setInterval(updateAIInsight, 15000); // Update AI insight every 15 seconds
});
</script>
</body>
</html>


