<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlphaAnalytics - Market Alerts</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* Mobile Menu Animation */
.menu-toggle span {
  transition: all 0.3s ease;
}

.menu-toggle span.active:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.menu-toggle span.active:nth-child(2) {
  opacity: 0;
}

.menu-toggle span.active:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Ensure mobile menu displays properly */
@media (max-width: 768px) {
  .nav-items {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-dark);
    border-top: 1px solid var(--border-color);
    padding: 16px;
    flex-direction: column;
    gap: 8px;
    z-index: 1000;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .nav-item {
    padding: 12px 16px;
    border-radius: 8px;
    justify-content: flex-start;
  }
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

:root {
  --primary-white: #fff;
  --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
  --bg-dark: #0f0f23;
  --bg-card: rgba(30, 30, 46, 0.8);
  --bg-card-hover: rgba(40, 40, 62, 0.9);
  --text-primary: #ffffff;
  --text-secondary: #a0a0c0;
  --text-muted: #707090;
  --border-color: rgba(255, 255, 255, 0.1);
  --hover-color: rgba(0, 230, 255, 0.15);
  --active-color: #00e6ff;
  --up-color: #00ff9d;
  --down-color: #ff4d7c;
  --accent-blue: #00e6ff;
  --accent-teal: #00ff9d;
  --accent-purple: #8a2be2;
  --accent-pink: #ff4d7c;
  --shadow-glow: 0 0 20px rgba(0, 230, 255, 0.3);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.2);
}

body.light {
  --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  --bg-dark: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.9);
  --bg-card-hover: rgba(255, 255, 255, 1);
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: rgba(0, 0, 0, 0.1);
  --hover-color: rgba(0, 230, 255, 0.1);
  --active-color: #0077cc;
  --shadow-glow: 0 0 20px rgba(0, 119, 204, 0.2);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.1);
}

body {
  background: var(--bg-gradient);
  color: var(--text-primary);
  transition: all 0.4s ease;
  min-height: 100vh;
  line-height: 1.6;
}

.container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
}

/* Enhanced Navbar */
.navbar {
  background: rgba(15, 15, 35, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 1000;
  padding: 0;
}

.nav-wrap {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
}

.nav-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
}

.logo {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 28px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo i {
  font-size: 24px;
}

.nav-items {
  display: flex;
  gap: 8px;
  list-style: none;
}

.nav-item {
  padding: 10px 16px;
  border-radius: 12px;
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  font-size: 14px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.nav-item:hover {
  background: var(--hover-color);
  color: var(--active-color);
  transform: translateY(-2px);
}

.nav-item.active {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.menu-toggle {
  display: none;
  flex-direction: column;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
}

.menu-toggle span {
  width: 24px;
  height: 2px;
  background: var(--text-primary);
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* Main Content */
.main-content {
  flex: 1;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

/* Header Section */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
  gap: 20px;
}

.header h1 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 32px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.header-controls {
  display: flex;
  gap: 16px;
  align-items: center;
}

/* Search Bar */
.search-container {
  position: relative;
  width: 400px;
  max-width: 100%;
}

.search-bar {
  width: 100%;
  padding: 14px 20px 14px 48px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 15px;
  font-weight: 500;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.search-bar:focus {
  outline: none;
  border-color: var(--active-color);
  box-shadow: var(--shadow-glow);
}

.search-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 12px;
}

.btn {
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-primary {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 30px rgba(0, 230, 255, 0.5);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--bg-card-hover);
  border-color: var(--active-color);
}

/* Stats Overview */
.stats-overview {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-bottom: 32px;
}

@media (max-width: 900px) {
  .stats-overview {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .stats-overview {
    grid-template-columns: 1fr;
  }
}

.stat-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.stat-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.stat-icon {
  font-size: 28px;
  margin-bottom: 12px;
  color: var(--active-color);
}

.stat-value {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  font-family: 'Space Grotesk', sans-serif;
}

.stat-label {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

/* Filters Section */
.filters-section {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  align-items: center;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.filter-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
}

.filter-select {
  padding: 12px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
  transition: all 0.3s ease;
  min-width: 160px;
}

.filter-select:focus {
  outline: none;
  border-color: var(--active-color);
  box-shadow: var(--shadow-glow);
}

/* Alerts Grid */
.alerts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  gap: 24px;
  margin-bottom: 32px;
}

.alert-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.alert-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.alert-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.alert-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.alert-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  line-height: 1.4;
  margin-bottom: 8px;
}

.alert-symbol {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

.alert-severity {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.severity-high {
  background: rgba(255, 77, 124, 0.15);
  color: var(--down-color);
}

.severity-medium {
  background: rgba(255, 165, 0, 0.15);
  color: #ffa500;
}

.severity-low {
  background: rgba(0, 255, 157, 0.15);
  color: var(--up-color);
}

.alert-description {
  font-size: 14px;
  line-height: 1.5;
  color: var(--text-secondary);
  margin-bottom: 20px;
}

.alert-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.alert-confidence {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.confidence-label {
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 500;
}

.confidence-bar {
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.confidence-fill {
  height: 100%;
  border-radius: 4px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.alert-time {
  font-size: 13px;
  color: var(--text-muted);
}

.alert-details {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.alert-stats {
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: var(--text-muted);
}

.alert-stat {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.stat-value-small {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.alert-actions {
  display: flex;
  gap: 8px;
}

.btn-small {
  padding: 8px 16px;
  font-size: 13px;
  border-radius: 8px;
}

/* Section Headers */
.section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 24px;
}

.section-header h2 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 24px;
  font-weight: 700;
}

/* Loading States */
.loading {
  text-align: center;
  padding: 40px;
  color: var(--text-muted);
}

.loading i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

/* Shimmer Loading */
.shimmer {
  background: linear-gradient(90deg, var(--bg-dark) 25%, var(--bg-card) 50%, var(--bg-dark) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Empty State */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: var(--text-muted);
}

.empty-state i {
  font-size: 64px;
  margin-bottom: 16px;
  opacity: 0.5;
}

/* Responsive Design */
@media (max-width: 768px) {
  .navbar {
    padding: 0 16px;
  }
  
  .nav-row {
    flex-wrap: wrap;
  }
  
  .menu-toggle {
    display: flex;
  }
  
  .nav-items {
    display: none;
    width: 100%;
    flex-direction: column;
    gap: 8px;
    margin-top: 16px;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .main-content {
    padding: 16px;
  }
  
  .header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .header-controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .search-container {
    width: 100%;
  }
  
  .alerts-grid {
    grid-template-columns: 1fr;
  }
  
  .filters-section {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .filter-select {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .alert-card {
    padding: 20px;
  }
  
  .alert-details {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }
  
  .alert-stats {
    width: 100%;
    justify-content: space-between;
  }
}
</style>
/* Mobile Menu Animation */
.menu-toggle span {
  transition: all 0.3s ease;
}

.menu-toggle span.active:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.menu-toggle span.active:nth-child(2) {
  opacity: 0;
}

.menu-toggle span.active:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Ensure mobile menu displays properly */
@media (max-width: 768px) {
  .nav-items {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-dark);
    border-top: 1px solid var(--border-color);
    padding: 16px;
    flex-direction: column;
    gap: 8px;
    z-index: 1000;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .nav-item {
    padding: 12px 16px;
    border-radius: 8px;
    justify-content: flex-start;
  }
}

</head>
<body>
<div class="container">
  <!-- Enhanced Navbar -->
  <header class="navbar">
    <div class="nav-wrap">
      <div class="nav-row">
        <div class="logo">
          <i class="fas fa-chart-line"></i>
          AlphaAnalytics
        </div>
        
        <button class="menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <nav class="nav-items">
          <a href="jeet.html" class="nav-item">
            <i class="fas fa-home"></i>Dashboard
          </a>
          <a href="portfolio.html" class="nav-item">
            <i class="fas fa-briefcase"></i>Portfolio
          </a>
          <a href="mystock.html" class="nav-item">
            <i class="fas fa-star"></i>My Stock
          </a>
          <a href="deposit.html" class="nav-item">
            <i class="fas fa-wallet"></i>Deposit
          </a>
          <a href="insight.html" class="nav-item">
            <i class="fas fa-brain"></i>Insight
          </a>
          <a href="prediction.html" class="nav-item">
            <i class="fas fa-crystal-ball"></i>Prediction
          </a>
          <a href="news.html" class="nav-item">
            <i class="fas fa-newspaper"></i>News
          </a>
          <a href="videos.html" class="nav-item">
            <i class="fas fa-play-circle"></i>Videos
          </a>
          <a href="Superstars.html" class="nav-item">
            <i class="fas fa-trophy"></i>Superstars
          </a>
          <a href="alerts.html" class="nav-item active">
            <i class="fas fa-bell"></i>Alerts
          </a>
          <a href="help.html" class="nav-item">
            <i class="fas fa-question-circle"></i>Help
          </a>
          <a href="profile.html" class="nav-item">
            <i class="fas fa-user"></i>Profile
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <div class="header">
      <h1>Market Intelligence Alerts</h1>
      <div class="header-controls">
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-bar" placeholder="Search alerts..." id="searchInput">
        </div>
        <div class="action-buttons">
          <button class="btn btn-primary" onclick="loadAlerts()">
            <i class="fas fa-sync-alt"></i>Refresh
          </button>
          <button class="btn btn-secondary" onclick="toggleTheme()">
            <i class="fas fa-palette"></i>Theme
          </button>
        </div>
      </div>
    </div>

    <!-- Stats Overview -->
    <div class="stats-overview">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-bell"></i></div>
        <div class="stat-value" id="totalAlerts">0</div>
        <div class="stat-label">Total Alerts</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
        <div class="stat-value" id="highAlerts">0</div>
        <div class="stat-label">High Priority</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
        <div class="stat-value" id="accuracyRate">0%</div>
        <div class="stat-label">Accuracy Rate</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-clock"></i></div>
        <div class="stat-value" id="avgResponse">0m</div>
        <div class="stat-label">Avg. Response Time</div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters-section">
      <div class="filter-group">
        <div class="filter-label">Severity</div>
        <select class="filter-select" id="severitySelect">
          <option value="all">All Severities</option>
          <option value="high">High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
      </div>
      
      <div class="filter-group">
        <div class="filter-label">Alert Type</div>
        <select class="filter-select" id="typeSelect">
          <option value="all">All Types</option>
          <option value="price">Price Movement</option>
          <option value="volume">Volume Spike</option>
          <option value="volatility">Volatility</option>
          <option value="news">News/Sentiment</option>
          <option value="technical">Technical Pattern</option>
        </select>
      </div>
      
      <div class="filter-group">
        <div class="filter-label">Time Frame</div>
        <select class="filter-select" id="timeSelect">
          <option value="all">All Time</option>
          <option value="1h">Last 1 Hour</option>
          <option value="6h">Last 6 Hours</option>
          <option value="24h">Last 24 Hours</option>
          <option value="7d">Last 7 Days</option>
        </select>
      </div>
    </div>

    <!-- Alerts Grid -->
    <div class="section-header">
      <i class="fas fa-bell"></i>
      <h2>Active Market Alerts</h2>
    </div>
    
    <div class="alerts-grid" id="alertsGrid">
      <!-- Alert cards will be populated by JavaScript -->
    </div>

    <!-- Loading State -->
    <div class="loading" id="loadingState" style="display: none;">
      <i class="fas fa-spinner fa-spin"></i>
      <h3>Loading Market Alerts</h3>
      <p>Monitoring real-time market conditions...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="emptyState" style="display: none;">
      <i class="fas fa-check-circle"></i>
      <h3>No Alerts Found</h3>
      <p>No alerts match your current filters. Try adjusting your criteria or check back later.</p>
    </div>
  </main>
</div>
<script>
// Configuration
const CONFIG = {
    CACHE_DURATION: 5 * 60 * 1000, // 5 minutes
    DEBOUNCE_DELAY: 300,
    LOAD_DELAY: 800,
    AUTO_REFRESH_INTERVAL: 30000, // 30 seconds
    MAX_ALERTS_DISPLAY: 100
};

// Alert data
const ALERTS_DATA = [
    {
        id: 1,
        symbol: "AAPL",
        name: "Apple Inc.",
        type: "price",
        severity: "high",
        title: "Significant Price Drop Detected",
        description: "Apple shares dropped 4.2% in the last hour amid broader tech selloff. Technical indicators show potential support at $175.",
        confidence: 85,
        timestamp: Date.now() - 1000 * 60 * 18, // 18 minutes ago
        stats: {
            precision: "82%",
            last30: "24 alerts",
            response: "12m"
        },
        trigger: "Price dropped below 50-day moving average",
        impact: "High",
        recommendation: "Consider buying opportunity at support levels",
        isRead: false,
        isDismissed: false
    },
    {
        id: 2,
        symbol: "NVDA",
        name: "NVIDIA Corp.",
        type: "volume",
        severity: "high",
        title: "Unusual Volume Activity",
        description: "NVIDIA trading volume 3.2x above average with large block trades. Options activity suggests institutional positioning.",
        confidence: 78,
        timestamp: Date.now() - 1000 * 60 * 45, // 45 minutes ago
        stats: {
            precision: "79%",
            last30: "18 alerts",
            response: "8m"
        },
        trigger: "Volume spike with institutional block trades",
        impact: "Medium",
        recommendation: "Monitor for breakout above $950 resistance",
        isRead: false,
        isDismissed: false
    },
    {
        id: 3,
        symbol: "TSLA",
        name: "Tesla Inc.",
        type: "news",
        severity: "medium",
        title: "Negative News Sentiment Spike",
        description: "Social media sentiment turned negative following CEO comments. Sentiment score dropped from +0.8 to -1.2 in 2 hours.",
        confidence: 72,
        timestamp: Date.now() - 1000 * 60 * 120, // 2 hours ago
        stats: {
            precision: "75%",
            last30: "15 alerts",
            response: "15m"
        },
        trigger: "Social media sentiment decline",
        impact: "Medium",
        recommendation: "Watch for technical breakdown below $170",
        isRead: false,
        isDismissed: false
    },
    {
        id: 4,
        symbol: "AMZN",
        name: "Amazon.com Inc.",
        type: "technical",
        severity: "medium",
        title: "Bullish Technical Pattern Forming",
        description: "Amazon forming inverse head and shoulders pattern on 4-hour chart. Potential breakout target: $185-190 range.",
        confidence: 68,
        timestamp: Date.now() - 1000 * 60 * 180, // 3 hours ago
        stats: {
            precision: "71%",
            last30: "22 alerts",
            response: "20m"
        },
        trigger: "Inverse head and shoulders pattern detected",
        impact: "Low",
        recommendation: "Consider long position on breakout above $178",
        isRead: false,
        isDismissed: false
    },
    {
        id: 5,
        symbol: "MSFT",
        name: "Microsoft Corp.",
        type: "volatility",
        severity: "low",
        title: "Volatility Compression Nearing End",
        description: "MSFT volatility has compressed to 3-month lows. Historical patterns suggest imminent expansion with directional move.",
        confidence: 65,
        timestamp: Date.now() - 1000 * 60 * 240, // 4 hours ago
        stats: {
            precision: "69%",
            last30: "12 alerts",
            response: "25m"
        },
        trigger: "Volatility compression to extreme lows",
        impact: "Low",
        recommendation: "Prepare for volatility expansion, consider strangle options",
        isRead: false,
        isDismissed: false
    },
    {
        id: 6,
        symbol: "GOOGL",
        name: "Alphabet Inc.",
        type: "price",
        severity: "high",
        title: "Breakout Above Key Resistance",
        description: "Google broke above $175 resistance with strong volume. Next resistance levels at $180 and $185. RSI shows room for further upside.",
        confidence: 81,
        timestamp: Date.now() - 1000 * 60 * 30, // 30 minutes ago
        stats: {
            precision: "84%",
            last30: "19 alerts",
            response: "10m"
        },
        trigger: "Price breakout with volume confirmation",
        impact: "High",
        recommendation: "Consider adding to long positions, target $180",
        isRead: false,
        isDismissed: false
    }
];

// Application State
const AppState = {
    alerts: [...ALERTS_DATA],
    filteredAlerts: [...ALERTS_DATA],
    currentFilters: {
        severity: 'all',
        type: 'all',
        time: 'all',
        searchQuery: '',
        showRead: true,
        showDismissed: false
    },
    currentAlert: null,
    isInitialized: false,
    autoRefreshInterval: null,
    unreadCount: ALERTS_DATA.filter(alert => !alert.isRead).length
};

// Mobile Menu Controller
class MobileMenu {
    constructor() {
        this.menuToggle = document.querySelector('.menu-toggle');
        this.navItems = document.querySelector('.nav-items');
        this.isOpen = false;
        this.init();
    }

    init() {
        if (this.menuToggle && this.navItems) {
            this.menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                this.toggle();
            });

            this.setupClickOutsideHandler();
        }
    }

    toggle() {
        this.isOpen = !this.isOpen;
        this.navItems.classList.toggle('show');
        
        const spans = this.menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.toggle('active'));
    }

    close() {
        this.isOpen = false;
        this.navItems.classList.remove('show');
        const spans = this.menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.remove('active'));
    }

    setupClickOutsideHandler() {
        document.addEventListener('click', (event) => {
            if (this.isOpen && !event.target.closest('.navbar')) {
                this.close();
            }
        });
    }
}

// Notification Manager
class NotificationManager {
    static show(message, type = 'info') {
        let notification = document.getElementById('alertNotification');
        if (!notification) {
            notification = document.createElement('div');
            notification.id = 'alertNotification';
            notification.className = 'notification';
            document.body.appendChild(notification);
        }

        const icons = {
            success: 'fa-check-circle',
            error: 'fa-exclamation-circle',
            warning: 'fa-exclamation-triangle',
            info: 'fa-info-circle'
        };

        notification.innerHTML = `
            <div class="notification-content ${type}">
                <i class="fas ${icons[type] || icons.info} notification-icon"></i>
                <span class="notification-message">${message}</span>
                <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;

        notification.classList.add('show');

        setTimeout(() => {
            if (notification.parentElement) {
                notification.remove();
            }
        }, 5000);
    }
}

// Cache Manager
class CacheManager {
    static get(key) {
        const cached = localStorage.getItem(`alerts_${key}`);
        if (cached) {
            const { data, timestamp } = JSON.parse(cached);
            if (Date.now() - timestamp < CONFIG.CACHE_DURATION) {
                return data;
            }
        }
        return null;
    }

    static set(key, data) {
        const cacheData = {
            data,
            timestamp: Date.now()
        };
        localStorage.setItem(`alerts_${key}`, JSON.stringify(cacheData));
    }

    static clear() {
        // Clear all alert-related cache
        Object.keys(localStorage).forEach(key => {
            if (key.startsWith('alerts_')) {
                localStorage.removeItem(key);
            }
        });
    }
}

// Stats Manager
class StatsManager {
    static update() {
        const totalAlerts = AppState.alerts.length;
        const highAlerts = AppState.alerts.filter(alert => alert.severity === 'high' && !alert.isDismissed).length;
        const unreadAlerts = AppState.alerts.filter(alert => !alert.isRead && !alert.isDismissed).length;
        const accuracyRate = this.calculateAccuracyRate();
        const avgResponse = this.calculateAvgResponse();

        document.getElementById('totalAlerts').textContent = totalAlerts;
        document.getElementById('highAlerts').textContent = highAlerts;
        document.getElementById('unreadAlerts').textContent = unreadAlerts;
        document.getElementById('accuracyRate').textContent = accuracyRate;
        document.getElementById('avgResponse').textContent = avgResponse;

        // Update badge if exists
        this.updateUnreadBadge(unreadAlerts);
    }

    static calculateAccuracyRate() {
        const totalAlerts = AppState.alerts.length;
        if (totalAlerts === 0) return "0%";
        
        const avgConfidence = AppState.alerts.reduce((sum, alert) => sum + alert.confidence, 0) / totalAlerts;
        return `${Math.round(avgConfidence)}%`;
    }

    static calculateAvgResponse() {
        const responses = AppState.alerts.map(alert => {
            const responseTime = alert.stats.response;
            return parseInt(responseTime) || 0;
        });
        
        const avg = responses.reduce((sum, time) => sum + time, 0) / responses.length;
        return `${Math.round(avg)}m`;
    }

    static updateUnreadBadge(count) {
        const badge = document.getElementById('unreadBadge');
        if (badge) {
            if (count > 0) {
                badge.textContent = count;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }
    }
}

// Alert Display Manager
class AlertDisplayManager {
    static loadAlertsGrid() {
        const alertsGrid = document.getElementById('alertsGrid');
        const emptyState = document.getElementById('emptyState');
        const loadingState = document.getElementById('loadingState');
        
        if (!alertsGrid || !emptyState || !loadingState) return;

        loadingState.style.display = 'none';
        
        if (AppState.filteredAlerts.length === 0) {
            alertsGrid.style.display = 'none';
            emptyState.style.display = 'block';
            return;
        }
        
        alertsGrid.style.display = 'grid';
        emptyState.style.display = 'none';
        
        alertsGrid.innerHTML = AppState.filteredAlerts.map(alert => 
            this.createAlertCardHTML(alert)
        ).join('');
        
        this.attachAlertCardEventListeners();
    }

    static createAlertCardHTML(alert) {
        const isUnread = !alert.isRead;
        const isDismissed = alert.isDismissed;
        
        return `
            <div class="alert-card ${isUnread ? 'unread' : ''} ${isDismissed ? 'dismissed' : ''}" data-alert-id="${alert.id}">
                <div class="alert-header">
                    <div class="alert-title-section">
                        ${isUnread ? '<div class="unread-indicator"></div>' : ''}
                        <div>
                            <h3 class="alert-title">${alert.title}</h3>
                            <div class="alert-symbol">
                                <span class="symbol-ticker">${alert.symbol}</span>
                                <span class="symbol-name">${alert.name}</span>
                                <span class="alert-type">${this.formatAlertType(alert.type)}</span>
                            </div>
                        </div>
                    </div>
                    <div class="alert-severity severity-${alert.severity}">
                        ${alert.severity.toUpperCase()}
                    </div>
                </div>
                
                <p class="alert-description">${alert.description}</p>
                
                <div class="alert-meta">
                    <div class="alert-confidence">
                        <div class="confidence-label">Confidence Level</div>
                        <div class="confidence-display">
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: ${alert.confidence}%"></div>
                            </div>
                            <span class="confidence-value">${alert.confidence}%</span>
                        </div>
                    </div>
                    <div class="alert-time">
                        <i class="fas fa-clock"></i>
                        ${this.formatTimeAgo(alert.timestamp)}
                    </div>
                </div>
                
                <div class="alert-details">
                    <div class="alert-stats">
                        <div class="alert-stat">
                            <div class="stat-label">Precision</div>
                            <div class="stat-value-small ${this.getPrecisionColor(alert.stats.precision)}">
                                ${alert.stats.precision}
                            </div>
                        </div>
                        <div class="alert-stat">
                            <div class="stat-label">Last 30d</div>
                            <div class="stat-value-small">${alert.stats.last30}</div>
                        </div>
                        <div class="alert-stat">
                            <div class="stat-label">Avg Response</div>
                            <div class="stat-value-small">${alert.stats.response}</div>
                        </div>
                    </div>
                    <div class="alert-actions">
                        <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); AlertModalManager.open(${alert.id})">
                            <i class="fas fa-eye"></i> Details
                        </button>
                        <button class="btn btn-secondary btn-small" onclick="event.stopPropagation(); AlertManager.dismissAlert(${alert.id})">
                            <i class="fas fa-times"></i> Dismiss
                        </button>
                    </div>
                </div>
            </div>
        `;
    }

    static attachAlertCardEventListeners() {
        document.querySelectorAll('.alert-card').forEach(card => {
            card.addEventListener('click', function() {
                const alertId = this.getAttribute('data-alert-id');
                AlertModalManager.open(parseInt(alertId));
            });
        });
    }

    static formatTimeAgo(timestamp) {
        const seconds = Math.floor((Date.now() - timestamp) / 1000);
        
        if (seconds < 60) {
            return `${seconds}s ago`;
        } else if (seconds < 3600) {
            const minutes = Math.floor(seconds / 60);
            return `${minutes}m ago`;
        } else if (seconds < 86400) {
            const hours = Math.floor(seconds / 3600);
            return `${hours}h ago`;
        } else {
            const days = Math.floor(seconds / 86400);
            return `${days}d ago`;
        }
    }

    static formatAlertType(type) {
        const typeMap = {
            'price': 'Price Alert',
            'volume': 'Volume Alert',
            'news': 'News Sentiment',
            'technical': 'Technical Pattern',
            'volatility': 'Volatility Alert'
        };
        return typeMap[type] || type;
    }

    static getPrecisionColor(precision) {
        const value = parseInt(precision);
        if (value >= 80) return 'positive';
        if (value >= 70) return 'medium';
        return 'negative';
    }

    static showLoadingState() {
        const alertsGrid = document.getElementById('alertsGrid');
        const emptyState = document.getElementById('emptyState');
        const loadingState = document.getElementById('loadingState');
        
        if (alertsGrid) alertsGrid.style.display = 'none';
        if (emptyState) emptyState.style.display = 'none';
        if (loadingState) loadingState.style.display = 'block';
    }

    static createLoadingHTML() {
        return Array(4).fill().map(() => `
            <div class="alert-card loading">
                <div class="alert-header">
                    <div class="shimmer" style="height: 20px; width: 70%; margin-bottom: 8px; border-radius: 4px;"></div>
                    <div class="shimmer" style="height: 16px; width: 40%; border-radius: 4px;"></div>
                </div>
                <div class="shimmer" style="height: 16px; margin-bottom: 8px; border-radius: 4px;"></div>
                <div class="shimmer" style="height: 16px; margin-bottom: 8px; border-radius: 4px;"></div>
                <div class="shimmer" style="height: 16px; width: 80%; margin-bottom: 16px; border-radius: 4px;"></div>
                <div class="shimmer" style="height: 12px; width: 60%; border-radius: 4px;"></div>
            </div>
        `).join('');
    }
}

// Alert Modal Manager
class AlertModalManager {
    static open(alertId) {
        const alert = AppState.alerts.find(a => a.id === alertId);
        if (!alert) {
            NotificationManager.show('Alert not found', 'error');
            return;
        }

        // Mark as read
        AlertManager.markAsRead(alertId);

        const modal = document.getElementById('alertModal');
        const modalContent = document.getElementById('modalContent');

        if (!modal || !modalContent) {
            console.error('Modal elements not found');
            return;
        }

        modalContent.innerHTML = this.createModalContentHTML(alert);
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        document.documentElement.style.overflow = 'hidden';

        AppState.currentAlert = alert;
    }

    static createModalContentHTML(alert) {
        return `
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2>${alert.title}</h2>
                    <div class="modal-subtitle">
                        <span class="symbol-ticker-large">${alert.symbol}</span>
                        <span class="symbol-name-large">${alert.name}</span>
                        <span class="alert-type-badge">${AlertDisplayManager.formatAlertType(alert.type)}</span>
                        <span class="alert-severity-badge severity-${alert.severity}">${alert.severity.toUpperCase()}</span>
                    </div>
                </div>
                <button class="modal-close" onclick="AlertModalManager.close()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="modal-description">
                    <p>${alert.description}</p>
                </div>
                
                <div class="modal-stats">
                    <div class="modal-stat">
                        <div class="modal-stat-value">${alert.confidence}%</div>
                        <div class="modal-stat-label">Confidence</div>
                    </div>
                    <div class="modal-stat">
                        <div class="modal-stat-value">${alert.stats.precision}</div>
                        <div class="modal-stat-label">Precision</div>
                    </div>
                    <div class="modal-stat">
                        <div class="modal-stat-value">${alert.stats.last30}</div>
                        <div class="modal-stat-label">Alerts (30d)</div>
                    </div>
                    <div class="modal-stat">
                        <div class="modal-stat-value">${alert.stats.response}</div>
                        <div class="modal-stat-label">Avg Response</div>
                    </div>
                </div>
                
                <div class="modal-details">
                    <div class="detail-section">
                        <h3>Trigger</h3>
                        <p>${alert.trigger}</p>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Impact Assessment</h3>
                        <div class="impact-level impact-${alert.impact.toLowerCase()}">
                            ${alert.impact} Impact
                        </div>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Recommendation</h3>
                        <p>${alert.recommendation}</p>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-primary" onclick="AlertManager.viewStockDetails('${alert.symbol}')">
                        <i class="fas fa-chart-line"></i> View Stock Details
                    </button>
                    <button class="btn btn-secondary" onclick="AlertManager.dismissAlert(${alert.id})">
                        <i class="fas fa-times"></i> Dismiss Alert
                    </button>
                </div>
            </div>
        `;
    }

    static close() {
        const modal = document.getElementById('alertModal');
        if (modal) {
            modal.style.display = 'none';
        }
        document.body.style.overflow = 'auto';
        document.documentElement.style.overflow = 'auto';
        AppState.currentAlert = null;
    }

    static setupEventListeners() {
        const modal = document.getElementById('alertModal');
        if (modal) {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    AlertModalManager.close();
                }
            });
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && AppState.currentAlert) {
                AlertModalManager.close();
            }
        });
    }
}

// Filter Manager
class FilterManager {
    constructor() {
        this.severitySelect = document.getElementById('severitySelect');
        this.typeSelect = document.getElementById('typeSelect');
        this.timeSelect = document.getElementById('timeSelect');
        this.searchInput = document.getElementById('searchInput');
        this.showReadCheckbox = document.getElementById('showRead');
        this.showDismissedCheckbox = document.getElementById('showDismissed');
        this.debouncedFilter = this.debounce(this.applyFilters.bind(this), CONFIG.DEBOUNCE_DELAY);
        this.init();
    }

    init() {
        if (this.severitySelect) {
            this.severitySelect.addEventListener('change', () => this.handleFilterChange());
        }
        if (this.typeSelect) {
            this.typeSelect.addEventListener('change', () => this.handleFilterChange());
        }
        if (this.timeSelect) {
            this.timeSelect.addEventListener('change', () => this.handleFilterChange());
        }
        if (this.searchInput) {
            this.searchInput.addEventListener('input', this.debouncedFilter);
        }
        if (this.showReadCheckbox) {
            this.showReadCheckbox.addEventListener('change', () => this.handleFilterChange());
        }
        if (this.showDismissedCheckbox) {
            this.showDismissedCheckbox.addEventListener('change', () => this.handleFilterChange());
        }
    }

    handleFilterChange() {
        this.applyFilters();
    }

    applyFilters() {
        const severity = this.severitySelect?.value || 'all';
        const type = this.typeSelect?.value || 'all';
        const time = this.timeSelect?.value || 'all';
        const searchQuery = this.searchInput?.value.toLowerCase().trim() || '';
        const showRead = this.showReadCheckbox?.checked ?? true;
        const showDismissed = this.showDismissedCheckbox?.checked ?? false;

        AppState.currentFilters = { severity, type, time, searchQuery, showRead, showDismissed };
        AlertManager.filterAlerts();
    }

    clear() {
        if (this.severitySelect) this.severitySelect.value = 'all';
        if (this.typeSelect) this.typeSelect.value = 'all';
        if (this.timeSelect) this.timeSelect.value = 'all';
        if (this.searchInput) this.searchInput.value = '';
        if (this.showReadCheckbox) this.showReadCheckbox.checked = true;
        if (this.showDismissedCheckbox) this.showDismissedCheckbox.checked = false;
        
        this.applyFilters();
        NotificationManager.show('Filters cleared', 'success');
    }

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
}

// Alert Manager
class AlertManager {
    static filterAlerts() {
        const { severity, type, time, searchQuery, showRead, showDismissed } = AppState.currentFilters;

        // Apply filters
        AppState.filteredAlerts = AppState.alerts.filter(alert => {
            // Severity filter
            if (severity !== 'all' && alert.severity !== severity) {
                return false;
            }
            
            // Type filter
            if (type !== 'all' && alert.type !== type) {
                return false;
            }
            
            // Time filter
            if (time !== 'all') {
                const now = Date.now();
                const alertTime = alert.timestamp;
                let timeThreshold;
                
                switch (time) {
                    case '1h': timeThreshold = now - (1000 * 60 * 60); break;
                    case '6h': timeThreshold = now - (1000 * 60 * 60 * 6); break;
                    case '24h': timeThreshold = now - (1000 * 60 * 60 * 24); break;
                    case '7d': timeThreshold = now - (1000 * 60 * 60 * 24 * 7); break;
                    default: timeThreshold = 0;
                }
                
                if (alertTime < timeThreshold) {
                    return false;
                }
            }
            
            // Read status filter
            if (!showRead && alert.isRead) {
                return false;
            }
            
            // Dismissed status filter
            if (!showDismissed && alert.isDismissed) {
                return false;
            }
            
            // Search filter
            if (searchQuery && 
                !alert.symbol.toLowerCase().includes(searchQuery) &&
                !alert.name.toLowerCase().includes(searchQuery) &&
                !alert.title.toLowerCase().includes(searchQuery) &&
                !alert.description.toLowerCase().includes(searchQuery) &&
                !alert.trigger.toLowerCase().includes(searchQuery)) {
                return false;
            }
            
            return true;
        });

        AlertDisplayManager.loadAlertsGrid();
        StatsManager.update();
    }

    static markAsRead(alertId) {
        const alertIndex = AppState.alerts.findIndex(alert => alert.id === alertId);
        if (alertIndex !== -1 && !AppState.alerts[alertIndex].isRead) {
            AppState.alerts[alertIndex].isRead = true;
            this.saveAlerts();
            StatsManager.update();
            AlertDisplayManager.loadAlertsGrid();
        }
    }

    static markAllAsRead() {
        let updated = false;
        AppState.alerts.forEach(alert => {
            if (!alert.isRead) {
                alert.isRead = true;
                updated = true;
            }
        });
        
        if (updated) {
            this.saveAlerts();
            StatsManager.update();
            AlertDisplayManager.loadAlertsGrid();
            NotificationManager.show('All alerts marked as read', 'success');
        }
    }

    static dismissAlert(alertId) {
        const alertIndex = AppState.alerts.findIndex(alert => alert.id === alertId);
        if (alertIndex !== -1) {
            AppState.alerts[alertIndex].isDismissed = true;
            this.saveAlerts();
            StatsManager.update();
            AlertManager.filterAlerts();
            NotificationManager.show('Alert dismissed', 'success');
            
            // Close modal if open
            if (AppState.currentAlert && AppState.currentAlert.id === alertId) {
                AlertModalManager.close();
            }
        }
    }

    static dismissAll() {
        if (confirm('Are you sure you want to dismiss all visible alerts?')) {
            AppState.filteredAlerts.forEach(alert => {
                const mainAlert = AppState.alerts.find(a => a.id === alert.id);
                if (mainAlert) {
                    mainAlert.isDismissed = true;
                }
            });
            
            this.saveAlerts();
            StatsManager.update();
            AlertManager.filterAlerts();
            NotificationManager.show('All visible alerts dismissed', 'success');
        }
    }

    static viewStockDetails(symbol) {
        // In a real implementation, this would navigate to stock details
        NotificationManager.show(`Opening stock details for ${symbol}`, 'info');
        console.log(`Viewing stock details for ${symbol}`);
    }

    static refreshAlerts() {
        AlertDisplayManager.showLoadingState();
        
        setTimeout(() => {
            // Simulate new alerts
            const newAlert = {
                ...ALERTS_DATA[0],
                id: Date.now(),
                timestamp: Date.now(),
                isRead: false,
                isDismissed: false
            };
            
            AppState.alerts.unshift(newAlert);
            this.saveAlerts();
            AlertManager.filterAlerts();
            NotificationManager.show('Alerts refreshed', 'success');
        }, CONFIG.LOAD_DELAY);
    }

    static saveAlerts() {
        try {
            localStorage.setItem('userAlerts', JSON.stringify(AppState.alerts));
        } catch (error) {
            console.error('Failed to save alerts:', error);
        }
    }

    static loadAlerts() {
        try {
            const savedAlerts = localStorage.getItem('userAlerts');
            if (savedAlerts) {
                const parsedAlerts = JSON.parse(savedAlerts);
                AppState.alerts = parsedAlerts;
                AppState.filteredAlerts = [...parsedAlerts];
            }
        } catch (error) {
            console.error('Failed to load alerts:', error);
        }
    }

    static clearFilters() {
        const filterManager = AlertApp.getInstance().filterManager;
        filterManager.clear();
    }
}

// Theme Manager
class ThemeManager {
    static toggle() {
        document.body.classList.toggle('light');
        const isLight = document.body.classList.contains('light');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        NotificationManager.show(`Theme changed to ${isLight ? 'light' : 'dark'} mode`, 'info');
    }

    static load() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light');
        }
    }
}

// Auto Refresh Manager
class AutoRefreshManager {
    static start() {
        if (AppState.autoRefreshInterval) {
            clearInterval(AppState.autoRefreshInterval);
        }
        
        AppState.autoRefreshInterval = setInterval(() => {
            AlertManager.refreshAlerts();
        }, CONFIG.AUTO_REFRESH_INTERVAL);
    }

    static stop() {
        if (AppState.autoRefreshInterval) {
            clearInterval(AppState.autoRefreshInterval);
            AppState.autoRefreshInterval = null;
        }
    }

    static toggle() {
        if (AppState.autoRefreshInterval) {
            this.stop();
            NotificationManager.show('Auto-refresh disabled', 'info');
        } else {
            this.start();
            NotificationManager.show('Auto-refresh enabled (30s)', 'success');
        }
    }
}

// Main Alert Application
class AlertApp {
    constructor() {
        this.mobileMenu = null;
        this.filterManager = null;
        this.instance = null;
        this.init();
    }

    static getInstance() {
        return this.instance;
    }

    async init() {
        console.log('🚀 Initializing Alert Application...');
        AlertApp.instance = this;
        
        // Load theme and saved data
        ThemeManager.load();
        AlertManager.loadAlerts();
        
        // Initialize components
        this.mobileMenu = new MobileMenu();
        this.filterManager = new FilterManager();
        AlertModalManager.setupEventListeners();
        
        // Load initial content with loading state
        AlertDisplayManager.showLoadingState();
        
        // Simulate API delay
        setTimeout(() => {
            StatsManager.update();
            AlertManager.filterAlerts();
            AppState.isInitialized = true;
            
            // Start auto-refresh
            AutoRefreshManager.start();
            
            console.log('✅ Alert Application initialized successfully');
        }, CONFIG.LOAD_DELAY);
    }

    destroy() {
        AutoRefreshManager.stop();
        AlertModalManager.close();
        console.log('📋 Alert Application destroyed');
    }
}

// Global functions for HTML event handlers
function toggleTheme() {
    ThemeManager.toggle();
}

function refreshAlerts() {
    AlertManager.refreshAlerts();
}

function clearFilters() {
    AlertManager.clearFilters();
}

function markAllAsRead() {
    AlertManager.markAllAsRead();
}

function dismissAllAlerts() {
    AlertManager.dismissAll();
}

function toggleAutoRefresh() {
    AutoRefreshManager.toggle();
}

// Initialize the application
document.addEventListener('DOMContentLoaded', () => {
    window.alertApp = new AlertApp();
});

// Error boundary
window.addEventListener('error', (event) => {
    console.error('Global error:', event.error);
    NotificationManager.show('An unexpected error occurred', 'error');
});

// Add notification and loading styles
const additionalStyles = `
    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 0;
        min-width: 300px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        transform: translateX(400px);
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 10000;
        overflow: hidden;
    }
    
    .notification.show {
        transform: translateX(0);
        opacity: 1;
    }
    
    .notification-content {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px;
    }
    
    .notification-content.success {
        border-left: 4px solid var(--up-color);
    }
    
    .notification-content.error {
        border-left: 4px solid var(--down-color);
    }
    
    .notification-content.warning {
        border-left: 4px solid #ff9800;
    }
    
    .notification-content.info {
        border-left: 4px solid #2196f3;
    }
    
    .notification-icon {
        font-size: 1.2em;
    }
    
    .notification-content.success .notification-icon {
        color: var(--up-color);
    }
    
    .notification-content.error .notification-icon {
        color: var(--down-color);
    }
    
    .notification-content.warning .notification-icon {
        color: #ff9800;
    }
    
    .notification-content.info .notification-icon {
        color: #2196f3;
    }
    
    .notification-message {
        flex: 1;
        font-size: 14px;
    }
    
    .notification-close {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
    }
    
    .notification-close:hover {
        background: var(--border-color);
        color: var(--text-primary);
    }
    
    .alert-card.loading {
        opacity: 0.7;
        pointer-events: none;
    }
    
    .alert-card.unread {
        border-left: 4px solid var(--active-color);
    }
    
    .alert-card.dismissed {
        opacity: 0.6;
        background: var(--border-color);
    }
    
    .unread-indicator {
        width: 8px;
        height: 8px;
        background: var(--active-color);
        border-radius: 50%;
        margin-right: 12px;
        flex-shrink: 0;
    }
    
    .shimmer {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 4px;
    }
    
    @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
    }
    
    .symbol-ticker {
        font-weight: bold;
        color: var(--active-color);
    }
    
    .symbol-name {
        color: var(--text-muted);
        margin: 0 8px;
    }
    
    .alert-type {
        background: var(--border-color);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 11px;
        color: var(--text-muted);
    }
    
    .confidence-display {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
    }
    
    .confidence-bar {
        flex: 1;
        height: 6px;
        background: var(--border-color);
        border-radius: 3px;
        overflow: hidden;
    }
    
    .confidence-fill {
        height: 100%;
        background: var(--up-color);
        border-radius: 3px;
        transition: width 0.3s ease;
    }
    
    .confidence-value {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
        min-width: 30px;
    }
    
    .stat-value-small.positive {
        color: var(--up-color);
    }
    
    .stat-value-small.medium {
        color: #d97706;
    }
    
    .stat-value-small.negative {
        color: var(--down-color);
    }
    
    .impact-level {
        padding: 8px 12px;
        border-radius: 6px;
        font-weight: 600;
        display: inline-block;
    }
    
    .impact-high {
        background: #fee2e2;
        color: #dc2626;
    }
    
    .impact-medium {
        background: #fef3c7;
        color: #d97706;
    }
    
    .impact-low {
        background: #d1fae5;
        color: #059669;
    }
`;

// Add styles to document
const styleSheet = document.createElement('style');
styleSheet.textContent = additionalStyles;
document.head.appendChild(styleSheet);
</script>

</body>
</html>


