<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Stock Predictions - AlphaAnalytics</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', sans-serif;
}

:root {
  --primary-white: #ffffff;
  --bg-gradient: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
  --bg-dark: #0f0f23;
  --bg-card: rgba(30, 30, 46, 0.8);
  --bg-card-hover: rgba(40, 40, 62, 0.9);
  --text-primary: #ffffff;
  --text-secondary: #a0a0c0;
  --text-muted: #707090;
  --border-color: rgba(255, 255, 255, 0.1);
  --hover-color: rgba(0, 230, 255, 0.15);
  --active-color: #00e6ff;
  --up-color: #00ff9d;
  --down-color: #ff4d7c;
  --accent-blue: #00e6ff;
  --accent-teal: #00ff9d;
  --accent-purple: #8a2be2;
  --accent-pink: #ff4d7c;
  --shadow-glow: 0 0 20px rgba(0, 230, 255, 0.3);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.2);
}

body.light {
  --bg-gradient: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  --bg-dark: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.9);
  --bg-card-hover: rgba(255, 255, 255, 1);
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: rgba(0, 0, 0, 0.1);
  --hover-color: rgba(0, 230, 255, 0.1);
  --active-color: #0077cc;
  --shadow-glow: 0 0 20px rgba(0, 119, 204, 0.2);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.1);
}

body {
  background: var(--bg-gradient);
  color: var(--text-primary);
  transition: all 0.4s ease;
  min-height: 100vh;
  line-height: 1.6;
}

.container {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
}

/* Enhanced Navbar */
.navbar {
  background: rgba(15, 15, 35, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 1000;
  padding: 0;
}

.nav-wrap {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
}

.nav-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
}

.logo {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 28px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  display: flex;
  align-items: center;
  gap: 8px;
}

.logo i {
  font-size: 24px;
}

.nav-items {
  display: flex;
  gap: 8px;
  list-style: none;
}

.nav-item {
  padding: 10px 16px;
  border-radius: 12px;
  color: var(--text-secondary);
  text-decoration: none;
  font-weight: 500;
  font-size: 14px;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.nav-item:hover {
  background: var(--hover-color);
  color: var(--active-color);
  transform: translateY(-2px);
}

.nav-item.active {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.menu-toggle {
  display: none;
  flex-direction: column;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
}

.menu-toggle span {
  width: 24px;
  height: 2px;
  background: var(--text-primary);
  border-radius: 2px;
  transition: all 0.3s ease;
}

/* Mobile Menu Animation */
.menu-toggle span.active:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.menu-toggle span.active:nth-child(2) {
  opacity: 0;
}

.menu-toggle span.active:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Ensure mobile menu displays properly */
@media (max-width: 768px) {
  .nav-items {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--bg-dark);
    border-top: 1px solid var(--border-color);
    padding: 16px;
    flex-direction: column;
    gap: 8px;
    z-index: 1000;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .nav-item {
    padding: 12px 16px;
    border-radius: 8px;
    justify-content: flex-start;
  }
  
  .menu-toggle {
    display: flex;
  }
}

/* Main Content */
.main-content {
  flex: 1;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 32px;
}

/* Header Section */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
  gap: 20px;
}

.header h1 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 32px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.header-controls {
  display: flex;
  gap: 16px;
  align-items: center;
}

/* Search Bar */
.search-container {
  position: relative;
  width: 400px;
  max-width: 100%;
}

.search-bar {
  width: 100%;
  padding: 14px 20px 14px 48px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  color: var(--text-primary);
  font-size: 15px;
  font-weight: 500;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.search-bar:focus {
  outline: none;
  border-color: var(--active-color);
  box-shadow: var(--shadow-glow);
}

.search-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 12px;
}

.btn {
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.btn-primary {
  background: var(--active-color);
  color: var(--bg-dark);
  box-shadow: var(--shadow-glow);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 30px rgba(0, 230, 255, 0.5);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--bg-card-hover);
  border-color: var(--active-color);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

/* AI Insight */
.ai-insight {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
}

.ai-insight-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.ai-insight-header h3 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.ai-icon {
  font-size: 20px;
  color: var(--active-color);
}

.ai-content {
  color: var(--text-primary);
  font-size: 15px;
  line-height: 1.6;
}

/* Prediction Dashboard */
.prediction-dashboard {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 32px;
}

@media (max-width: 900px) {
  .prediction-dashboard {
    grid-template-columns: 1fr;
  }
}

/* Stock Selector */
.stock-selector {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.stock-selector::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.stock-selector:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.stock-selector h3 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 16px;
}

.stock-search-container {
  position: relative;
  margin-bottom: 16px;
}

.stock-search {
  width: 100%;
  padding: 14px 20px 14px 48px;
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  color: var(--text-primary);
  font-size: 15px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.stock-search:focus {
  outline: none;
  border-color: var(--active-color);
  box-shadow: var(--shadow-glow);
}

.stock-search-icon {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
}

.stock-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 400px;
  overflow-y: auto;
}

.stock-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: var(--bg-dark);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 1px solid var(--border-color);
}

.stock-item:hover {
  border-color: var(--active-color);
  transform: translateY(-2px);
}

.stock-item.active {
  background: var(--active-color);
  color: var(--bg-dark);
  border-color: var(--active-color);
}

.stock-info {
  display: flex;
  flex-direction: column;
}

.stock-symbol {
  font-weight: 700;
  font-size: 16px;
  font-family: 'Space Grotesk', sans-serif;
}

.stock-name {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 4px;
}

.stock-price {
  font-weight: 700;
  font-size: 16px;
  font-family: 'Space Grotesk', sans-serif;
}

.price-up {
  color: var(--up-color);
}

.price-down {
  color: var(--down-color);
}

/* Prediction Card */
.prediction-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.prediction-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.prediction-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.prediction-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.prediction-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
}

.prediction-actions {
  display: flex;
  gap: 10px;
}

.prediction-chart {
  height: 200px;
  background: var(--bg-dark);
  border-radius: 12px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  position: relative;
  overflow: hidden;
}

.prediction-details {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.prediction-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.prediction-label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.prediction-value {
  font-size: 18px;
  font-weight: 700;
  font-family: 'Space Grotesk', sans-serif;
}

.confidence-high {
  color: var(--up-color);
}

.confidence-medium {
  color: #ffa500;
}

.confidence-low {
  color: var(--down-color);
}

/* Next Day Predictions */
.next-day-predictions {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  margin-bottom: 32px;
}

.next-day-predictions h3 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 20px;
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.predictions-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

@media (max-width: 900px) {
  .predictions-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .predictions-grid {
    grid-template-columns: 1fr;
  }
}

.prediction-type {
  background: var(--bg-dark);
  padding: 20px;
  border-radius: 12px;
  border: 1px solid var(--border-color);
  text-align: center;
}

.prediction-type-label {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.prediction-type-value {
  font-size: 20px;
  font-weight: 700;
  font-family: 'Space Grotesk', sans-serif;
  margin-bottom: 6px;
}

.prediction-type-change {
  font-size: 14px;
  font-weight: 600;
}

/* Performance Metrics */
.metrics-section {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  margin-bottom: 32px;
}

@media (max-width: 900px) {
  .metrics-section {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .metrics-section {
    grid-template-columns: 1fr;
  }
}

.metric-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.metric-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.metric-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.metric-icon {
  font-size: 28px;
  margin-bottom: 12px;
  color: var(--active-color);
}

.metric-value {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  font-family: 'Space Grotesk', sans-serif;
}

.metric-label {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

/* Charts Section */
.charts-section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 32px;
}

@media (max-width: 900px) {
  .charts-section {
    grid-template-columns: 1fr;
  }
}

.chart-card {
  background: var(--bg-card);
  border-radius: 20px;
  padding: 24px;
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.chart-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-blue), var(--accent-teal));
}

.chart-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-card);
  border-color: var(--active-color);
}

.chart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.chart-title {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 18px;
  font-weight: 700;
}

.chart-actions select {
  padding: 8px 12px;
  background: var(--bg-dark);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-primary);
  font-size: 14px;
  font-weight: 500;
}

.chart-container {
  height: 250px;
  background: var(--bg-dark);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  position: relative;
  overflow: hidden;
}

/* Iframe Container */
.iframe-container {
  position: relative;
  height: 600px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 20px;
  overflow: hidden;
  box-shadow: var(--shadow-card);
  transition: transform 0.3s ease, border-color 0.3s ease;
  backdrop-filter: blur(10px);
}

.iframe-container:hover {
  transform: translateY(-5px);
  border-color: var(--active-color);
}

iframe {
  width: 100%;
  height: 100%;
  border: none;
}

.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--active-color);
  font-size: 18px;
  z-index: 10;
  flex-direction: column;
  gap: 10px;
}

/* Shimmer Loading */
.shimmer {
  background: linear-gradient(90deg, var(--bg-dark) 25%, var(--bg-card) 50%, var(--bg-dark) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Loading States */
.loading {
  text-align: center;
  padding: 40px;
  color: var(--text-muted);
}

.loading i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

/* Notification */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 20px;
  border-radius: 12px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  backdrop-filter: blur(10px);
  z-index: 10000;
  transform: translateX(400px);
  transition: transform 0.3s ease;
  max-width: 400px;
}

.notification.show {
  transform: translateX(0);
}

.notification.success {
  border-color: var(--up-color);
}

.notification.error {
  border-color: var(--down-color);
}

.notification-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.notification-icon {
  font-size: 20px;
}

.notification.success .notification-icon {
  color: var(--up-color);
}

.notification.error .notification-icon {
  color: var(--down-color);
}

.notification-message {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
}

/* Responsive Design */
@media (max-width: 768px) {
  .navbar {
    padding: 0 16px;
  }
  
  .nav-row {
    flex-wrap: wrap;
  }
  
  .menu-toggle {
    display: flex;
  }
  
  .nav-items {
    display: none;
    width: 100%;
    flex-direction: column;
    gap: 8px;
    margin-top: 16px;
  }
  
  .nav-items.show {
    display: flex;
  }
  
  .main-content {
    padding: 16px;
  }
  
  .header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .header-controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .search-container {
    width: 100%;
  }
}

@media (max-width: 480px) {
  .prediction-card {
    padding: 20px;
  }
  
  .stock-selector {
    padding: 20px;
  }
  
  .metric-card {
    padding: 20px;
  }
  
  .chart-card {
    padding: 20px;
  }
  
  .next-day-predictions {
    padding: 20px;
  }
}
</style>
</head>
<body>
<div class="container">
  <!-- Enhanced Navbar -->
  <header class="navbar">
    <div class="nav-wrap">
      <div class="nav-row">
        <div class="logo">
          <i class="fas fa-chart-line"></i>
          AlphaAnalytics
        </div>
        
        <button class="menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <nav class="nav-items">
          <a href="jeet.html" class="nav-item">
            <i class="fas fa-home"></i>Dashboard
          </a>
          <a href="portfolio.html" class="nav-item">
            <i class="fas fa-briefcase"></i>Portfolio
          </a>
          <a href="mystock.html" class="nav-item">
            <i class="fas fa-star"></i>My Stock
          </a>
          <a href="deposit.html" class="nav-item">
            <i class="fas fa-wallet"></i>Deposit
          </a>
          <a href="insight.html" class="nav-item">
            <i class="fas fa-brain"></i>Insight
          </a>
          <a href="prediction.html" class="nav-item active">
            <i class="fas fa-crystal-ball"></i>Prediction
          </a>
          <a href="news.html" class="nav-item">
            <i class="fas fa-newspaper"></i>News
          </a>
          <a href="videos.html" class="nav-item">
            <i class="fas fa-play-circle"></i>Videos
          </a>
          <a href="Superstars.html" class="nav-item">
            <i class="fas fa-trophy"></i>Superstars
          </a>
          <a href="alerts.html" class="nav-item">
            <i class="fas fa-bell"></i>Alerts
          </a>
          <a href="help.html" class="nav-item">
            <i class="fas fa-question-circle"></i>Help
          </a>
          <a href="profile.html" class="nav-item">
            <i class="fas fa-user"></i>Profile
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Notification -->
  <div class="notification" id="notification">
    <div class="notification-content">
      <i class="fas fa-check-circle notification-icon"></i>
      <div class="notification-message" id="notificationMessage">Operation completed successfully!</div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <div class="header">
      <h1>AI Stock Predictions</h1>
      <div class="header-controls">
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-bar" placeholder="Search predictions..." id="searchInput">
        </div>
        <div class="action-buttons">
          <button class="btn btn-primary" onclick="generateAllPredictions()" id="generateAllBtn">
            <i class="fas fa-bolt"></i>Generate All
          </button>
          <button class="btn btn-secondary" onclick="toggleTheme()">
            <i class="fas fa-palette"></i>Theme
          </button>
        </div>
      </div>
    </div>

    <!-- AI Insight -->
    <div class="ai-insight">
      <div class="ai-insight-header">
        <i class="fas fa-robot ai-icon"></i>
        <h3>AI Prediction Engine</h3>
      </div>
      <div class="ai-content" id="aiInsightText">
        Our AI analyzes 10 years of historical data, 100+ technical indicators, and market sentiment to generate high-accuracy next-day stock predictions for October 10, 2025.
      </div>
    </div>

    <!-- Performance Metrics -->
    <div class="metrics-section">
      <div class="metric-card">
        <div class="metric-icon"><i class="fas fa-bullseye"></i></div>
        <div class="metric-value">87.5%</div>
        <div class="metric-label">Prediction Accuracy</div>
      </div>
      <div class="metric-card">
        <div class="metric-icon"><i class="fas fa-trophy"></i></div>
        <div class="metric-value">24/30</div>
        <div class="metric-label">Profitable Predictions</div>
      </div>
      <div class="metric-card">
        <div class="metric-icon"><i class="fas fa-bolt"></i></div>
        <div class="metric-value">2.1s</div>
        <div class="metric-label">Avg. Processing Time</div>
      </div>
      <div class="metric-card">
        <div class="metric-icon"><i class="fas fa-database"></i></div>
        <div class="metric-value">10Y+</div>
        <div class="metric-label">Historical Data</div>
      </div>
    </div>

    <!-- Next Day Predictions -->
    <div class="next-day-predictions" id="nextDayPredictions" style="display: none;">
      <h3>ðŸ“ˆ Next Day Price Predictions (October 10, 2025)</h3>
      <div class="predictions-grid" id="predictionsGrid">
        <!-- Predictions will be populated by JavaScript -->
      </div>
    </div>

    <!-- Prediction Dashboard -->
    <div class="prediction-dashboard">
      <!-- Stock Selector -->
      <div class="stock-selector">
        <h3>Select Stock</h3>
        <div class="stock-search-container">
          <i class="fas fa-search stock-search-icon"></i>
          <input type="text" class="stock-search" placeholder="Search stocks..." id="stockSearch">
        </div>
        <div class="stock-list" id="stockList">
          <!-- Stock items will be populated by JavaScript -->
        </div>
      </div>

      <!-- Prediction Card -->
      <div class="prediction-card">
        <div class="prediction-header">
          <div class="prediction-title" id="selectedStock">AAPL - Apple Inc.</div>
          <div class="prediction-actions">
            <button class="btn btn-secondary" onclick="refreshPrediction()" id="refreshBtn">
              <i class="fas fa-sync-alt"></i>Refresh
            </button>
            <button class="btn btn-primary" onclick="generatePrediction()" id="predictBtn">
              <i class="fas fa-chart-line"></i>Predict
            </button>
          </div>
        </div>
        <div class="prediction-chart" id="predictionChart">
          <!-- Chart placeholder -->
          <div>Select a stock and click Predict to generate AI-powered forecasts</div>
        </div>
        <div class="prediction-details">
          <div class="prediction-item">
            <div class="prediction-label">Current Price</div>
            <div class="prediction-value" id="currentPrice">$182.63</div>
          </div>
          <div class="prediction-item">
            <div class="prediction-label">Predicted Close</div>
            <div class="prediction-value" id="predictedPrice">$195.42 <span class="price-up">(+7.0%)</span></div>
          </div>
          <div class="prediction-item">
            <div class="prediction-label">Confidence</div>
            <div class="prediction-value confidence-high" id="confidenceLevel">High (89%)</div>
          </div>
          <div class="prediction-item">
            <div class="prediction-label">Time Horizon</div>
            <div class="prediction-value" id="timeHorizon">Next Day</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">Historical Performance</div>
          <div class="chart-actions">
            <select id="historyRange">
              <option>1 Month</option>
              <option>3 Months</option>
              <option>1 Year</option>
              <option selected>10 Years</option>
            </select>
          </div>
        </div>
        <div class="chart-container">
          <!-- Chart placeholder -->
          <div>Historical performance chart will appear here</div>
        </div>
      </div>
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">Prediction Accuracy</div>
          <div class="chart-actions">
            <select id="accuracyFilter">
              <option>All Stocks</option>
              <option>Tech Sector</option>
              <option selected>Selected Stock</option>
            </select>
          </div>
        </div>
        <div class="chart-container">
          <!-- Chart placeholder -->
          <div>Accuracy chart will appear here</div>
        </div>
      </div>
    </div>

    <!-- Dash Integration -->
    <div class="header">
      <h2><i class="fas fa-sliders-h"></i> Advanced Analytics</h2>
      <p>Interactive predictions dashboard (powered by Dash)</p>
    </div>

    <div class="iframe-container">
      <div class="loading-overlay" id="loadingOverlay">
        <div class="shimmer" style="width:60%;height:20px;"></div>
        <div class="shimmer" style="width:40%;height:16px;"></div>
      </div>
      <iframe src="http://localhost:8080/dash/" onload="hideLoader()"></iframe>
    </div>
  </main>
</div>

<script>
// Configuration
const CONFIG = {
    API_BASE_URL: 'http://localhost:8080',
    DEBOUNCE_DELAY: 300,
    NOTIFICATION_DURATION: 5000
};

// Application State
const AppState = {
    allStocks: [],
    selectedStock: null,
    isGenerating: false,
    currentPredictions: null
};

// Mobile Menu Controller
class MobileMenu {
    constructor() {
        this.menuToggle = document.querySelector('.menu-toggle');
        this.navItems = document.querySelector('.nav-items');
        this.isOpen = false;
        this.init();
    }

    init() {
        if (this.menuToggle && this.navItems) {
            this.menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                this.toggle();
            });

            this.setupClickOutsideHandler();
        }
    }

    toggle() {
        this.isOpen = !this.isOpen;
        this.navItems.classList.toggle('show');
        
        // Animate hamburger to X
        const spans = this.menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.toggle('active'));
    }

    close() {
        this.isOpen = false;
        this.navItems.classList.remove('show');
        const spans = this.menuToggle.querySelectorAll('span');
        spans.forEach(span => span.classList.remove('active'));
    }

    setupClickOutsideHandler() {
        document.addEventListener('click', (event) => {
            if (this.isOpen && !event.target.closest('.navbar')) {
                this.close();
            }
        });
    }
}

// Notification Manager
class NotificationManager {
    static show(message, type = 'success') {
        const notification = document.getElementById('notification');
        const messageEl = document.getElementById('notificationMessage');
        const icon = notification.querySelector('.notification-icon');
        
        if (!notification || !messageEl) {
            console.log(`${type.toUpperCase()}: ${message}`);
            return;
        }

        messageEl.textContent = message;
        notification.className = `notification ${type}`;
        notification.classList.add('show');
        
        // Update icon based on type
        icon.className = type === 'success' 
            ? 'fas fa-check-circle notification-icon'
            : 'fas fa-exclamation-circle notification-icon';
        
        setTimeout(() => {
            notification.classList.remove('show');
        }, CONFIG.NOTIFICATION_DURATION);
    }

    static hide() {
        const notification = document.getElementById('notification');
        if (notification) {
            notification.classList.remove('show');
        }
    }
}

// API Service
class StockAPIService {
    static async fetchStocks() {
        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/api/stocks`);
            if (!response.ok) throw new Error(`HTTP ${response.status}: Failed to fetch stocks`);
            return await response.json();
        } catch (error) {
            console.error('Error fetching stocks:', error);
            NotificationManager.show('Using fallback stock data', 'error');
            return this.getFallbackStocks();
        }
    }

    static async generatePrediction(symbol) {
        try {
            const response = await fetch(`${CONFIG.API_BASE_URL}/api/predict`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ symbol })
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error || `HTTP ${response.status}: Prediction failed`);
            }
            
            return await response.json();
        } catch (error) {
            console.error('Prediction API error:', error);
            throw error;
        }
    }

    static getFallbackStocks() {
        return [
            { symbol: "AAPL", name: "Apple Inc.", price: 182.63, change: 1.24 },
            { symbol: "MSFT", name: "Microsoft Corp.", price: 407.57, change: -0.85 },
            { symbol: "GOOGL", name: "Alphabet Inc.", price: 172.34, change: 2.13 },
            { symbol: "AMZN", name: "Amazon.com Inc.", price: 178.22, change: 0.67 },
            { symbol: "TSLA", name: "Tesla Inc.", price: 175.79, change: -3.21 },
            { symbol: "META", name: "Meta Platforms Inc.", price: 485.58, change: 1.89 },
            { symbol: "NVDA", name: "NVIDIA Corp.", price: 950.02, change: 5.42 },
            { symbol: "JPM", name: "JPMorgan Chase & Co.", price: 195.18, change: -0.32 },
            { symbol: "JNJ", name: "Johnson & Johnson", price: 151.96, change: 0.45 },
            { symbol: "V", name: "Visa Inc.", price: 279.51, change: 0.92 }
        ];
    }
}

// Stock List Manager
class StockListManager {
    constructor() {
        this.stockList = document.getElementById('stockList');
        this.searchInput = document.getElementById('stockSearch');
        this.debouncedSearch = this.debounce(this.handleSearch.bind(this), CONFIG.DEBOUNCE_DELAY);
        this.init();
    }

    init() {
        if (this.searchInput) {
            this.searchInput.addEventListener('input', this.debouncedSearch);
        }
    }

    async populate() {
        if (!this.stockList) return;

        this.showLoadingState();
        
        try {
            AppState.allStocks = await StockAPIService.fetchStocks();
            this.renderStockList();
            
            // Select first stock by default
            if (AppState.allStocks.length > 0) {
                this.selectStock(AppState.allStocks[0]);
            }
            
        } catch (error) {
            this.showErrorState('Failed to load stocks');
        }
    }

    renderStockList() {
        if (!this.stockList) return;

        this.stockList.innerHTML = '';
        
        AppState.allStocks.forEach(stock => {
            const stockItem = this.createStockItem(stock);
            this.stockList.appendChild(stockItem);
        });
    }

    createStockItem(stock) {
        const stockItem = document.createElement('div');
        stockItem.className = 'stock-item';
        if (AppState.selectedStock?.symbol === stock.symbol) {
            stockItem.classList.add('active');
        }

        const changeClass = stock.change >= 0 ? 'price-up' : 'price-down';
        const changeSign = stock.change >= 0 ? '+' : '';

        stockItem.innerHTML = `
            <div class="stock-info">
                <div class="stock-symbol">${stock.symbol}</div>
                <div class="stock-name">${stock.name}</div>
            </div>
            <div class="stock-price ${changeClass}">
                $${stock.price?.toFixed(2) || '0.00'} 
                <span>${changeSign}${stock.change?.toFixed(2) || '0.00'}%</span>
            </div>
        `;
        
        stockItem.addEventListener('click', () => this.selectStock(stock));
        return stockItem;
    }

    selectStock(stock) {
        // Remove active class from all items
        document.querySelectorAll('.stock-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Add active class to clicked item
        const selectedItem = Array.from(document.querySelectorAll('.stock-item'))
            .find(item => item.querySelector('.stock-symbol').textContent === stock.symbol);
        
        if (selectedItem) {
            selectedItem.classList.add('active');
        }
        
        // Update selected stock
        AppState.selectedStock = stock;
        
        // Update display
        this.updateSelectedStockDisplay();
        
        // Reset prediction display
        PredictionDisplay.reset();
    }

    updateSelectedStockDisplay() {
        const selectedStockEl = document.getElementById('selectedStock');
        if (selectedStockEl && AppState.selectedStock) {
            selectedStockEl.textContent = 
                `${AppState.selectedStock.symbol} - ${AppState.selectedStock.name}`;
        }
    }

    handleSearch(event) {
        const query = event.target.value.toLowerCase().trim();
        const stockItems = document.querySelectorAll('.stock-item');
        
        stockItems.forEach(item => {
            const symbol = item.querySelector('.stock-symbol').textContent.toLowerCase();
            const name = item.querySelector('.stock-name').textContent.toLowerCase();
            const isVisible = symbol.includes(query) || name.includes(query);
            item.style.display = isVisible ? 'flex' : 'none';
        });
    }

    showLoadingState() {
        if (this.stockList) {
            this.stockList.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>Loading stocks...</div>
                </div>`;
        }
    }

    showErrorState(message) {
        if (this.stockList) {
            this.stockList.innerHTML = `
                <div class="loading" style="color: var(--down-color);">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>${message}</div>
                </div>`;
        }
    }

    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
}

// Prediction Display Manager
class PredictionDisplay {
    static reset() {
        if (!AppState.selectedStock) return;

        document.getElementById('currentPrice').textContent = 
            `$${AppState.selectedStock.price?.toFixed(2) || '0.00'}`;
        
        document.getElementById('predictedPrice').innerHTML = 
            '$0.00 <span></span>';
        
        document.getElementById('confidenceLevel').textContent = 'Not calculated';
        document.getElementById('confidenceLevel').className = 'prediction-value';
        
        const chart = document.getElementById('predictionChart');
        if (chart) {
            chart.innerHTML = '<div>Select a stock and click Predict to generate AI-powered forecasts</div>';
        }
        
        document.getElementById('timeHorizon').textContent = 'Next Day';
        this.hideNextDayPredictions();
    }

    static update(data) {
        if (!data || !AppState.selectedStock) return;

        const currentPrice = data.current_price;
        const closePrediction = data.predictions?.Close;
        const confidence = data.confidence?.Close || 80;
        
        // Calculate change percentage
        const changePercent = closePrediction ? 
            ((closePrediction.predicted - currentPrice) / currentPrice) * 100 : 0;
        
        // Update basic prediction info
        document.getElementById('currentPrice').textContent = `$${currentPrice.toFixed(2)}`;
        document.getElementById('predictedPrice').innerHTML = 
            `$${closePrediction?.predicted.toFixed(2) || '0.00'} 
            <span class="${changePercent >= 0 ? 'price-up' : 'price-down'}">
                (${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}%)
            </span>`;
        
        // Update confidence
        this.updateConfidence(confidence);
        
        // Update chart
        this.updateChart(data);
        
        // Update AI insight
        this.updateAIInsight(data);
        
        // Show next day predictions if available
        if (data.predictions) {
            this.showNextDayPredictions(data.predictions, currentPrice);
        }

        AppState.currentPredictions = data;
    }

    static updateConfidence(confidence) {
        let confidenceText, confidenceClass;
        
        if (confidence >= 85) {
            confidenceText = `High (${confidence}%)`;
            confidenceClass = 'confidence-high';
        } else if (confidence >= 75) {
            confidenceText = `Medium (${confidence}%)`;
            confidenceClass = 'confidence-medium';
        } else {
            confidenceText = `Low (${confidence}%)`;
            confidenceClass = 'confidence-low';
        }
        
        document.getElementById('confidenceLevel').textContent = confidenceText;
        document.getElementById('confidenceLevel').className = `prediction-value ${confidenceClass}`;
    }

    static updateChart(data) {
        const chart = document.getElementById('predictionChart');
        if (!chart) return;

        chart.innerHTML = `
            <div style="padding: 20px; text-align: center;">
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 10px;">
                    AI Prediction Analysis
                </div>
                <div style="font-size: 16px; font-weight: bold; color: var(--active-color);">
                    ${AppState.selectedStock.symbol} Next Day Forecast
                </div>
                <div style="margin-top: 20px; font-size: 13px; color: var(--text-muted);">
                    Based on 10 years of historical data and 100+ technical indicators
                </div>
                ${this.createMiniChart(data)}
            </div>
        `;
    }

    static createMiniChart(data) {
        if (!data.predictions) return '';
        
        return `
            <div style="margin-top: 15px; padding: 10px; background: var(--bg-dark); border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; font-size: 12px;">
                    <span>Current: $${data.current_price?.toFixed(2)}</span>
                    <span>Predicted: $${data.predictions.Close?.predicted.toFixed(2)}</span>
                </div>
                <div style="height: 4px; background: var(--border-color); border-radius: 2px; margin: 8px 0; overflow: hidden;">
                    <div style="height: 100%; background: var(--up-color); width: ${Math.min(100, (data.predictions.Close?.predicted / data.current_price) * 100)}%"></div>
                </div>
            </div>
        `;
    }

    static updateAIInsight(data) {
        const insightEl = document.getElementById('aiInsightText');
        if (insightEl) {
            insightEl.textContent = data.insight || 'AI analysis completed successfully.';
        }
    }

    static showNextDayPredictions(predictions, currentPrice) {
        const predictionsGrid = document.getElementById('predictionsGrid');
        const nextDaySection = document.getElementById('nextDayPredictions');
        
        if (!predictionsGrid || !nextDaySection) return;

        predictionsGrid.innerHTML = '';
        
        const priceTypes = [
            { key: 'Open', label: 'Open Price', icon: 'fa-door-open' },
            { key: 'High', label: 'High Price', icon: 'fa-arrow-up' },
            { key: 'Low', label: 'Low Price', icon: 'fa-arrow-down' },
            { key: 'Close', label: 'Close Price', icon: 'fa-door-closed' }
        ];
        
        priceTypes.forEach(type => {
            const prediction = predictions[type.key];
            if (prediction) {
                const changePercent = ((prediction.predicted - currentPrice) / currentPrice) * 100;
                const predictionEl = document.createElement('div');
                predictionEl.className = 'prediction-type';
                predictionEl.innerHTML = `
                    <div class="prediction-type-label">
                        <i class="fas ${type.icon}"></i> ${type.label}
                    </div>
                    <div class="prediction-type-value">$${prediction.predicted.toFixed(2)}</div>
                    <div class="prediction-type-change ${changePercent >= 0 ? 'price-up' : 'price-down'}">
                        ${changePercent >= 0 ? '+' : ''}${changePercent.toFixed(2)}%
                    </div>
                `;
                predictionsGrid.appendChild(predictionEl);
            }
        });
        
        nextDaySection.style.display = 'block';
    }

    static hideNextDayPredictions() {
        const nextDaySection = document.getElementById('nextDayPredictions');
        if (nextDaySection) {
            nextDaySection.style.display = 'none';
        }
    }

    static showLoadingState() {
        const chart = document.getElementById('predictionChart');
        if (chart) {
            chart.innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <div>Analyzing 10 years of data...</div>
                </div>`;
        }
    }

    static showErrorState(message) {
        const chart = document.getElementById('predictionChart');
        if (chart) {
            chart.innerHTML = `
                <div class="loading" style="color: var(--down-color);">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>${message}</div>
                </div>`;
        }
    }
}

// Prediction Manager
class PredictionManager {
    static async generate() {
        if (!AppState.selectedStock || AppState.isGenerating) return;

        AppState.isGenerating = true;
        this.updateButtonStates(true);
        PredictionDisplay.showLoadingState();

        try {
            const data = await StockAPIService.generatePrediction(AppState.selectedStock.symbol);
            PredictionDisplay.update(data);
            NotificationManager.show(
                `Successfully generated predictions for ${AppState.selectedStock.symbol}`, 
                'success'
            );
            
        } catch (error) {
            console.error('Prediction generation error:', error);
            PredictionDisplay.showErrorState(error.message);
            NotificationManager.show(`Prediction failed: ${error.message}`, 'error');
        } finally {
            AppState.isGenerating = false;
            this.updateButtonStates(false);
        }
    }

    static async generateAll() {
        if (AppState.isGenerating) return;

        AppState.isGenerating = true;
        const generateAllBtn = document.getElementById('generateAllBtn');
        
        if (generateAllBtn) {
            generateAllBtn.disabled = true;
            generateAllBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>Generating...';
        }

        NotificationManager.show('Generating predictions for all stocks...', 'success');

        // Simulate processing (replace with actual batch processing)
        try {
            await new Promise(resolve => setTimeout(resolve, 3000));
            NotificationManager.show('All predictions generated successfully!', 'success');
        } finally {
            AppState.isGenerating = false;
            if (generateAllBtn) {
                generateAllBtn.disabled = false;
                generateAllBtn.innerHTML = '<i class="fas fa-bolt"></i>Generate All';
            }
        }
    }

    static refresh() {
        if (AppState.selectedStock && !AppState.isGenerating) {
            this.generate();
        }
    }

    static updateButtonStates(isLoading) {
        const predictBtn = document.getElementById('predictBtn');
        const refreshBtn = document.getElementById('refreshBtn');

        if (predictBtn) {
            predictBtn.disabled = isLoading;
            predictBtn.innerHTML = isLoading 
                ? '<i class="fas fa-spinner fa-spin"></i>Predicting...'
                : '<i class="fas fa-chart-line"></i>Predict';
        }

        if (refreshBtn) {
            refreshBtn.disabled = isLoading;
        }
    }
}

// Theme Manager
class ThemeManager {
    static toggle() {
        document.body.classList.toggle('light');
        const isLight = document.body.classList.contains('light');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
    }

    static load() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light');
        }
    }
}

// Main Application
class StockPredictionApp {
    constructor() {
        this.mobileMenu = null;
        this.stockListManager = null;
        this.init();
    }

    async init() {
        console.log('ðŸš€ Initializing Stock Prediction App...');
        
        // Load theme
        ThemeManager.load();
        
        // Initialize components
        this.mobileMenu = new MobileMenu();
        this.stockListManager = new StockListManager();
        
        // Load initial data
        await this.stockListManager.populate();
        
        // Setup event listeners
        this.setupEventListeners();
        
        console.log('âœ… Stock Prediction App initialized successfully');
    }

    setupEventListeners() {
        // Prediction buttons
        const predictBtn = document.getElementById('predictBtn');
        const refreshBtn = document.getElementById('refreshBtn');
        const generateAllBtn = document.getElementById('generateAllBtn');

        if (predictBtn) {
            predictBtn.addEventListener('click', () => PredictionManager.generate());
        }
        if (refreshBtn) {
            refreshBtn.addEventListener('click', () => PredictionManager.refresh());
        }
        if (generateAllBtn) {
            generateAllBtn.addEventListener('click', () => PredictionManager.generateAll());
        }

        // Search functionality for predictions
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                console.log('Searching predictions:', e.target.value);
            });
        }
    }

    hideLoader() {
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (loadingOverlay) {
            loadingOverlay.style.display = 'none';
        }
    }
}

// Global functions for HTML event handlers
function toggleTheme() {
    ThemeManager.toggle();
}

function refreshPrediction() {
    PredictionManager.refresh();
}

function generatePrediction() {
    PredictionManager.generate();
}

function generateAllPredictions() {
    PredictionManager.generateAll();
}

function hideLoader() {
    if (window.stockApp) {
        window.stockApp.hideLoader();
    }
}

// Initialize the application
document.addEventListener('DOMContentLoaded', async () => {
    window.stockApp = new StockPredictionApp();
});

// Error boundary
window.addEventListener('error', (event) => {
    console.error('Global error:', event.error);
    NotificationManager.show('An unexpected error occurred', 'error');
});
</script>
</body>
</html>